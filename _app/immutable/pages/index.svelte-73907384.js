import{S as K,i as N,s as Q,w as T,x as b,y as H,z,A as F,q as v,o as x,B as P,C as q,e as j,k as L,c as B,a as X,d as $,m as S,b as Y,g as w,O as R,K as W,p as G,Q as J,n as M}from"../chunks/index-49b9df21.js";import Z from"./components/IndexMagicButton/index.svelte-2acd6234.js";import k from"./components/PokeBox/index.svelte-2902beae.js";import C from"./components/DetailPopup/index.svelte-f002f999.js";import"../chunks/index-49512a20.js";import"../chunks/index-30b38f2f.js";import"../chunks/useActions-eb7854e1.js";import"../chunks/toNumber-d8fdaa7d.js";import"../chunks/index-3ad73cac.js";import"../chunks/CircularProgress-27e6fe35.js";import"../chunks/preload-helper-936e422d.js";const U=300,tt=60,V="none";function I(o,t,n){return o.addEventListener(t,n),()=>o.removeEventListener(t,n)}function et(o,t){return t.filter(n=>o.pointerId!==n.pointerId)}function A(o,t,n,s,p){o.dispatchEvent(new CustomEvent(`${t}${p}`,{detail:{event:n,pointersCount:s.length}}))}function nt(o,t,n,s,p,i=V){t.style.touchAction=i;let r=[];function f(c){r.push(c),A(t,o,c,r,"down"),s==null||s(r,c);const d=c.pointerId;function l(u){d===u.pointerId&&(r=et(u,r),r.length||_(),A(t,o,u,r,"up"),p==null||p(r,u))}function _(){h(),g(),e(),a()}const h=I(t,"pointermove",u=>{r=r.map(E=>u.pointerId===E.pointerId?u:E),A(t,o,u,r,"move"),n==null||n(r,u)}),g=I(t,"lostpointercapture",u=>{l(u)}),e=I(t,"pointerup",u=>{l(u)}),a=I(t,"pointerleave",u=>{r=[],_(),A(t,o,u,r,"up"),p==null||p(r,u)})}const m=I(t,"pointerdown",f);return{destroy:()=>{m()}}}function it(o,t={timeframe:U,minSwipeDistance:tt,touchAction:V}){const n="swipe";let s,p,i,r;function f(c,d){p=d.clientX,i=d.clientY,s=Date.now(),c.length===1&&(r=d.target)}function m(c,d){if(d.type==="pointerup"&&c.length===0&&Date.now()-s<t.timeframe){const l=d.clientX-p,_=d.clientY-i,h=Math.abs(l),g=Math.abs(_);let e=null;h>=2*g&&h>t.minSwipeDistance?e=l>0?"right":"left":g>=2*h&&g>t.minSwipeDistance&&(e=_>0?"bottom":"top"),e&&o.dispatchEvent(new CustomEvent(n,{detail:{direction:e,target:r}}))}}return nt(n,o,null,f,m,t.touchAction)}const D=[{title:"\u5173\u4E1C 1",rule:"1-40"},{title:"\u5173\u4E1C 2",rule:"41-80"},{title:"\u5173\u4E1C 3",rule:"81-120"},{title:"\u5173\u4E1C 4",rule:"121-151"}];function ot(o,t){let n=o;return n+=t,n>=D.length&&(n=0),n<0&&(n=D.length-1),n}function y(o){const t=o.slice(),n=D[t[1]];return t[5]=n,t}function O(o){let t,n;const s=[o[5]];let p={};for(let i=0;i<s.length;i+=1)p=q(p,s[i]);return t=new k({props:p}),t.$on("detail",o[2]),{c(){T(t.$$.fragment)},l(i){b(t.$$.fragment,i)},m(i,r){H(t,i,r),n=!0},p(i,r){const f=r&2?z(s,[F(i[5])]):{};t.$set(f)},i(i){n||(v(t.$$.fragment,i),n=!0)},o(i){x(t.$$.fragment,i),n=!1},d(i){P(t,i)}}}function rt(o){var g;let t,n,s,p,i,r,f,m,c,d,l=D[o[1]]&&O(y(o));i=new Z({});const _=[(g=o[0])!=null?g:{}];let h={};for(let e=0;e<_.length;e+=1)h=q(h,_[e]);return f=new C({props:h}),f.$on("close",o[4]),{c(){t=j("div"),n=L(),s=j("div"),l&&l.c(),p=L(),T(i.$$.fragment),r=L(),T(f.$$.fragment),this.h()},l(e){t=B(e,"DIV",{class:!0}),X(t).forEach($),n=S(e),s=B(e,"DIV",{class:!0});var a=X(s);l&&l.l(a),a.forEach($),p=S(e),b(i.$$.fragment,e),r=S(e),b(f.$$.fragment,e),this.h()},h(){Y(t,"class","background svelte-1mb8ij"),Y(s,"class","content svelte-1mb8ij")},m(e,a){w(e,t,a),w(e,n,a),w(e,s,a),l&&l.m(s,null),w(e,p,a),H(i,e,a),w(e,r,a),H(f,e,a),m=!0,c||(d=[R(it.call(null,s)),W(s,"swipe",o[3])],c=!0)},p(e,[a]){var E;D[e[1]]?l?(l.p(y(e),a),a&2&&v(l,1)):(l=O(y(e)),l.c(),v(l,1),l.m(s,null)):l&&(M(),x(l,1,1,()=>{l=null}),G());const u=a&1?z(_,[F((E=e[0])!=null?E:{})]):{};f.$set(u)},i(e){m||(v(l),v(i.$$.fragment,e),v(f.$$.fragment,e),m=!0)},o(e){x(l),x(i.$$.fragment,e),x(f.$$.fragment,e),m=!1},d(e){e&&$(t),e&&$(n),e&&$(s),l&&l.d(),e&&$(p),P(i,e),e&&$(r),P(f,e),c=!1,J(d)}}}function st(o,t,n){let s=null,p=0;function i(m){n(0,s=m.detail)}function r(m){let c=0;m.detail.direction==="left"?c=1:m.detail.direction==="right"&&(c=-1),n(1,p=ot(p,c))}return[s,p,i,r,()=>n(0,s=null)]}class $t extends K{constructor(t){super(),N(this,t,st,rt,Q,{})}}export{$t as default};
