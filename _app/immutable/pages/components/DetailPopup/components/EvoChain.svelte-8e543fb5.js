import{S as d,i as h,s as v,e as g,c as p,a as _,d as f,g as w,E as a}from"../../../../chunks/index-a1512193.js";import{u as E}from"../../../../chunks/fetch-c004f49e.js";import{f as x}from"../../../../chunks/functional-2a297cb6.js";import"../../../../chunks/index-1a6731ea.js";import"../../../../chunks/tslib-2c74db2e.js";import"../../../../chunks/_commonjsHelpers-850449cf.js";import"../../../../chunks/preload-helper-936e422d.js";async function y(o){if(!o.url)throw new Error("missing evolution chain resource url");const e=await E.getResourceByUrl(o.url);let t=0;const i=[],s=[],r=[[null,e.chain]];do{const[n,l]=r.shift(),u={no:C(l.species.url),root:n===null,id:t++};if(i.push(u),n&&l.evolution_details.length){const c=l.evolution_details[0],m={from:n.id,to:u.id,detail:c};s.push(m)}r.push(...l.evolves_to.map(c=>[u,c]))}while(r.length);return{nodes:i,edges:s}}function C(o){const e=o.match(/pokemon-species\/(\d+)\/?$/);if(!e)throw new Error("invalid pokemon species resource url");return x(+e[1])}function S(o){let e;return{c(){e=g("div")},l(t){e=p(t,"DIV",{}),_(e).forEach(f)},m(t,i){w(t,e,i)},p:a,i:a,o:a,d(t){t&&f(e)}}}function k(o,e,t){let{url:i=void 0}=e,{no:s=null}=e,{form:r}=e;return o.$$set=n=>{"url"in n&&t(0,i=n.url),"no"in n&&t(1,s=n.no),"form"in n&&t(2,r=n.form)},o.$$.update=()=>{o.$$.dirty&7&&i&&y({url:i,no:s,form:r})},[i,s,r]}class I extends d{constructor(e){super(),h(this,e,k,S,v,{url:0,no:1,form:2})}}export{I as default};
